<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en" class="no-js"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en" class="no-js"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en" class="no-js"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en" class="no-js"> <!--<![endif]-->

<head>
	<meta charset="utf-8">
	<title>Ken Egozi | Web builder</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="Ken Egozi's homepage">
	<meta name="author" content="Ken Egozi">
	<meta content="Ken Egozi's homepage" property='og:description'>
	<meta content='summary' name='twitter:card'>
	<meta content='@kenegozi' name='twitter:site'>
	<meta content='Ken Egozi | Web builder' property='og:title'>
	
	<link rel="canonical" href="http://kenegozi.com/blog/tag/asp-net-2-0/index.html" />

	<link rel="stylesheet" href="/assets/stylesheets/bootstrap.css" />
	<link rel="stylesheet" href="/assets/stylesheets/main.css" />

	<!-- Google Fonts -->
	<link href='http://fonts.googleapis.com/css?family=Dosis:300,400,500,600,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,300,400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700' rel='stylesheet' type='text/css'>
	<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type='text/css'>

	<!-- IE 9 Fallback-->
	<!--[if IE 9]>
		<link href="/assets/css/ie.css" rel="stylesheet">
	<![endif]-->

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements and IE Fallback-->
	<!--[if lt IE 9]>
	  <script src="/assets/js/html5shiv.js"></script>
	<![endif]-->

	<!-- Fav and touch icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/img/apple-touch-icon-144-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/img/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/img/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="/assets/img/apple-touch-icon-57-precomposed.png">
	<link rel="shortcut icon" href="/assets/img/favicon.ico">
</head>
<body id="top" class="">
	
	<!-- NAVBAR -->
	<div class="navbar navbar-fixed-top navbar-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
					<span class="sr-only">Menu</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<nav class="navbar-collapse collapse" id="main-nav" role="navigation">
				<ul class="nav navbar-nav navbar-right">
					
					<li><a href="/">home</a></li>
					<li><a href="/#about">about</a></li>
					<li><a href="/#blog">blog</a></li>
					<li><a href="/#contact">contact</a></li>
				</ul>
			</nav>
		</div>
	</div>
	<!-- END NAVBAR -->
<section class="container content tags">
  <h1 class="post_title">Posts Tagged &ldquo;asp-net-2-0&rdquo;</h1>
  <div class="post-sidebar">
	<h5>Follow</h5>
	<p>
		<a href="http://feeds2.feedburner.com/kenegozi">
			<img src="http://feeds.feedburner.com/~fc/kenegozi?bg=000033&amp;fg=00FF00&amp;anim=1" height="26" width="88" style="border:0" alt="">
		</a>
	</p>
	<hr/>
</div>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2010/07/16/what-would-make-razor-really-cool">What would make Razor really cool</a></h2>
    <div class="meta">
        <time>on July 16, 2010</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/tools" rel="tag">tools</a>
            
            
        </span>
        
    </div>
    
     <p>The new thing in MS web development is <a href="http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx">Razor</a>, which at its base a templating engine.</p>

<p> </p>

<p>It would be really cool if:
- It would expose programmatic API (with c#5 going to Compiler-As-Service it would be a real shame if Razor would not behave the same way)
- It would not enforce an over bloated base-class (like, erm, System.Web.UI.Page). I wouldn’t go as far as an Interface (since looks like they do not believe in Design By Contract over there), but a super-simple abstract base class with minimal pre-set behaviour would be nice. It is doable with still supporting Webforms/MVC integration using wrappers (like the HttpContextBase approach)</p>

<p>These things would allow using it as a true templating engine, which then can be embedded as a view engine for other web frameworks (like Monorail and Fubu, and more), use it for off-line email templates processing, maybe even for emitting customised setting files for automated deployment scenarios.</p>

<p> </p>

<p>I need to try and explore into there and sniff around.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2010/04/09/why-isnrsquot-there-one-of-these-here-in-israel">Why isn&rsquo;t there one of these here in Israel?</a></h2>
    <div class="meta">
        <time>on April 9, 2010</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            
            
        </span>
        
    </div>
    
     <p>Microsoft free Web Camps around the globe</p>

<p><a href="http://www.webcamps.ms/">http://www.webcamps.ms/</a></p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2009/01/12/beware-of-static-session">Beware of static session</a></h2>
    <div class="meta">
        <time>on January 12, 2009</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>The bug:
Weird behaviours regarding session management</p>

<p> 
The blame:
(within session access wrapper static class):</p>

<p><code>
private static IDictionary session;
...
if (session == null)&amp;#160;&amp;#160; session = new SessionAdapter(HttpContext.Current.Session);
...
</code></p>

<p>so the first time the last line is called, the then-current-session is stored in a static variable, thus the first session is always referenced even for newer sessions.</p>

<p> </p>

<p>The reason for the above code being present in the first place is that:</p>

<p><code>
public static void SetSessionTo(IDictionary newSession)
{
    session = newSession;
}
</code></p>

<p>So that tests that a stubbed ‘session’ could have been injected into the session-wrapper-static-class thingie.</p>

<p>Clearly, the implementation was wrong.</p>

<p> 
The fix:
now the code looks like this:</p>

<p>```
private static IDictionary stubbedSession;</p>

<p>static IDictionary Session
{
    get { return stubbedSession ?? MonoRailHttpHandler.CurrentContext.Session; }
}
```</p>

<p>And these were 60 seconds on careless coding.</p>

<p> </p>

<p>Ken, the careless coder</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/08/24/keylevel-locked-cache-real-life-implementation">Key-level locked cache - real life implementation</a></h2>
    <div class="meta">
        <time>on August 24, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            
            
        </span>
        
    </div>
    
     <p>Following <a href="http://kenegozi.com/Blog/2008/08/23/lockers-dictionary.aspx">my post on key-level locked cache</a>, I got the following piece of code from my friend Moran Benisty, implementing the same idea over XmlDocuments which is being loaded over the Internet, and ASP.NET’s Cache.</p>

<p>This is a real life code. He’s using it on a very large-scale website in production.</p>

<p>As usual - use at your own risk, and be kind enough to share thoughts and improvement ideas here for his use.</p>

<p>```
public static class XmlService
{
    private static Dictionary _locks = new Dictionary();</p>

<pre><code>public static XmlDocument GetXml(string url)
{
    return GetXml(url, new TimeSpan(1, 0, 0), false);
}

public static XmlDocument GetXml(string url, TimeSpan timeToHold, bool autoRefresh)
{
    if (HttpRuntime.Cache[url] as string == "Failed")
        return null;

    XmlDocument xml = HttpRuntime.Cache[url] as XmlDocument;
    if (xml != null)
        return xml;

    if (!_locks.ContainsKey(url))
        lock (_locks)
            if (!_locks.ContainsKey(url))
                _locks.Add(url, new object());

    if (HttpRuntime.Cache[url] == null)
        lock (_locks[url])
            if (HttpRuntime.Cache[url] == null)
            {
                xml = LoadXml(url);
                if (xml != null)
                    HttpRuntime.Cache.Insert(url, xml, null,
                        DateTime.Now.Add(timeToHold),
                        System.Web.Caching.Cache.NoSlidingExpiration,
                        System.Web.Caching.CacheItemPriority.NotRemovable,
                        delegate(string dataKey, object value, CacheItemRemovedReason reason)
                        {
                            if (autoRefresh)
                                GetXml(url, timeToHold, autoRefresh);
                        }
                );
                else
                    HttpRuntime.Cache.Insert(url, "Failed", null, DateTime.Now.AddMinutes(5), System.Web.Caching.Cache.NoSlidingExpiration);
            }

    xml = HttpRuntime.Cache[url] as XmlDocument;
    return xml;
}

private static readonly ILog _errorlog = LogManager.GetLogger("ErrorLogger");
private static XmlDocument LoadXml(string url)
{
    try
    {
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
        request.Timeout = 3000;
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        XmlDocument xml = new XmlDocument();
        xml.Load(response.GetResponseStream());
        return xml;
    }
    catch (Exception ex)
    {
        _errorlog.Error(ex.Message, ex);
        return null;
    }
} } ```
</code></pre>

<p>I’d have switched XmlService with KeyLevelCacheService, XmlDocument with T, and LoadXml with Func<t>, then have a separate XmlService use KeyLevelCacheService internally.</t></p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/06/28/filebinderattribute-to-ease-fileupload-in-monorail">FileBinderAttribute to ease FileUpload in MonoRail</a></h2>
    <div class="meta">
        <time>on June 28, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>Following <a href="http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx">Scott Hanselman’s post</a> on FileUpload in ASP.NET MVC, I’ll add here a few bits on doing that in MonoRail.</p>

<p>First, as MonoRail is an extension on top of plain ol’ ASP.NET, just as ASP.NET MVC is, you can do the exact same thing - i.e iterate over Request.Files, and use a mocked Files collection for test or something.</p>

<p>But as the action parameters binder is very smart, and easily extensible, it’s even nicer to just bind the posted data to a HttpPostedFile, using a FileBinder:</p>

<!-- code formatted by http://manoli.net/csharpformat/ -->
<p>{% highlight c# %}
   1:  [AttributeUsage(AttributeTargets.Parameter, AllowMultiple = false, Inherited = false)]   2:  publicclass FileBinderAttribute: Attribute, <strong>IParameterBinder</strong>   3:  {   4:  publicint CalculateParamPoints(IEngineContext context, IController controller, IControllerContext controllerContext, ParameterInfo parameterInfo)   5:      {   6:  var key = parameterInfo.Name;   7:  return context.Request.Files[key] != null ? 10 : 0;   8:      }   9:    10:  publicobject Bind(IEngineContext context, IController controller, IControllerContext controllerContext, ParameterInfo parameterInfo)  11:      {  12:  var key = parameterInfo.Name;  13:  return context.Request.Files[key] as HttpPostedFile;  14:      }  15:  }{% endhighlight %}</p>

<p>So a custom binder is an attribute, that implements IParameterBinder, a two methods interface:
- CalculateParamPoints() - is for helping the framework correctly guess the best candidate of the action overloads. If the file exists in the request then it makes an action with a HttpPostedFile parameter with the name of the file upload name, a better candidate than an overload with a String parameter with the same name. </p>

<ul>
  <li>Bind() - well, kinda’ self explanatory.</li>
</ul>

<p>so now you’re action can look like this:</p>

<p>{% highlight c# %}
   1:  publicvoid Save([FileBinder] HttpPostedFile myfile)   2:  {   3:  if (myFile != null)   4:      {   5:  // do stuff with the file   6:      }   7:  }{% endhighlight %}</p>

<p>Cool? well actually what really is cool is that binding to HttpPostedFile is baked into MonoRail to begin with - so you don’t even need this FileBinderAttribute at all ! you can simply</p>

<p>{% highlight c# %}
   1:  publicvoid Save(HttpPostedFile myfile)   2:  {   3:  if (myFile != null)   4:      {   5:  // do stuff with the file   6:      }   7:  }{% endhighlight %}</p>

<p>So why did I show you that?</p>

<p>Testablility.</p>

<p>Since HttpPostedFile is not easily mockable* (cuz it’s bloody sealed and not new-able), you should do what you always do when in need to bypass one of these un-testable hard-to-test* sealed classes: Adapter pattern. Introduce IHttpPostedFile, and supply your own HttpPostedFile encapsulating the built in one.</p>

<p>so:</p>

<p>{% highlight c# %}</p>

<p>1:  [AttributeUsage(AttributeTargets.Parameter, AllowMultiple = false, Inherited = false)]   2:  publicclass FileBinderAttribute: Attribute, <strong>IParameterBinder</strong>   3:  {   4:  publicint CalculateParamPoints(IEngineContext context, IController controller, IControllerContext controllerContext, ParameterInfo parameterInfo)   5:      {   6:  var key = parameterInfo.Name;   7:  return context.Request.Files[key] != null ? 10 : 0;   8:      }   9:    10:  publicobject Bind(IEngineContext context, IController controller, IControllerContext controllerContext, ParameterInfo parameterInfo)  11:      {  12:  var key = parameterInfo.Name;</p>

<p>13:          var file = context.Request.Files[key] as HttpPostedFile;    14:  return file == null ? null : HttpPostedFileAdapter(file);  15:      }  16:  }
{% endhighlight %}</p>

<p>and</p>

<p>{% highlight c# %}
   1:  publicvoid Save([FileBinder] IHttpPostedFile myfile)   2:  {   3:  if (myFile != null)   4:      {   5:  // do stuff with the file   6:      }   7:  }{% endhighlight %}</p>

<ul>
  <li>Yes Roy, I know you can throw some TypeMock magic at it</li>
</ul>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/03/06/the-only-quotasp-dot-net-mvc-preview-2-announcementquot-post-youd-want-to-read">The Only &quot;ASP.NET MVC Preview 2 Announcement&quot; Post You'd Want To Read</a></h2>
    <div class="meta">
        <time>on March 6, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            
            
        </span>
        
    </div>
    
     <p>It seam like every one (now including me) is posting excitingly about the new preview of ASP.NET MVC.</p>

<p>Probably to get traffic or whadever.</p>

<p>Most of those goes like “I usually do not do this, but hey- here’s the link”.</p>

<p><a href="http://graysmatter.codivation.com/PermaLink,guid,6740574f-c50d-4a19-82fd-7ca5ec1077db.aspx">Justice Gray’s post is different</a>.</p>

<p>btw, as you are all excited about it, I’d use that to point you to something quite similar, more mature, that lets you “easily build MVC based applications in ASP.NET with routing, intellisense, and total joy, not to mention that it runs on .NET 2.0 “ - that would be the MonoRail thing, preferably (by me and a few others) accompanied by AspView.</p>

<p>And since I didn’t put the MVC p2 link here, I won’t link to MonoRail and AspView. After all, if you’re reading this, you probably have those links in your favorites …</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/02/22/abstractbaseclass-vs-dot--interfaces">AbstractBaseClass vs. Interfaces</a></h2>
    <div class="meta">
        <time>on February 22, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/architecture" rel="tag">architecture</a>
            
            
        </span>
        
    </div>
    
     <p>Reading <a href="http://haacked.com/archive/2008/02/21/versioning-issues-with-abstract-base-classes-and-interfaces.aspx">this post from Phil Haack</a> made me jump a little. Oh no, I said, Please don’t let the clean IMvcFramework become clumsy.</p>

<p><a href="http://www.ayende.com/Blog/archive/2008/02/21/Re-Versioning-Issues-With-Abstract-Base-Classes-and-Interfaces.aspx">Ayende has ranted about it better than I would</a>.</p>

<p>Now I see that <a href="http://haacked.com/archive/2008/02/21/abstract-base-classes-have-versioning-problems-too.aspx">Phil has issues with ABC as well</a>.</p>

<p>The answers for the ABC problems he shows there are cumbersome. In order to gain “flexibility”, you end up polluting your API with “CanSupportCrap” methods, etc.</p>

<p>So, to recap:
- Phil, (probably inspired by Framework Design Guidelines) claim that using ABC over Interfaces is better as it won’t cause breaking changes.
- Ayende points out that the breaking change won’t be to the end user (as in - developers who uses the framework) but rather to the framework maintainer (who works hard anyway and should know his way around), and to framework extenders (again, should not whine about those ‘breaking changes’). As an aside, Ayende also brings up the sealed/internal/non-virtual rant.
- Phil admits to the weaknesses of ABC, just by showing an even weaker way of overcoming them.
- I recap all that.</p>

<p>Please Please Please keep IHttpContext in place …</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/02/05/alt-dot-net-uk-conf">alt.net uk conf</a></h2>
    <div class="meta">
        <time>on February 5, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/altnetuk" rel="tag">altnetuk</a>
            
            
        </span>
        
    </div>
    
     <p>This weekend I’ve had to pleasure to attend the altnetuk conf in London. This has been quite an amazing experience. I have really liked the way it has ben organized into open-spaces, and I just wish I could’ve split myself to four, so I’d be able to be at all of the sessions (the F# one was greatly missed …)</p>

<p>I have met great people, have discussed exciting things, and had a lot of fun.</p>

<p>Most of the people referred to me as “the MonoRail guy” which was quite amusing, as I am only the creator of AspView (which in turn is a shameless idea-and-code ripoff from Brail), and I have very little to do with the actuall coolness and usefulness of MonoRail … I do hope though that I did manage to address pepole concerns regarding MonoRail, and the Castle Project as a whole.</p>

<p>Interesting (however not surprising) moment:</p>

<p>On the panel dealing with MVC frameworks for ASP.NET, about 25 people were around the table. When people who are actually using MonoRail/ASP.NET MVC for commercial production environment, only 4 have raised their hands. however, all the others said that they wish the could have done that, and the only reason they do not, is the reluctance from their bosses/clients.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/02/04/my-favorite-quote-from-altnetuk-conf">My Favorite Quote From AltNetUK conf</a></h2>
    <div class="meta">
        <time>on February 4, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/altnetuk" rel="tag">altnetuk</a>
            
            
        </span>
        
    </div>
    
     <p>After being told that MonoRail would not make his dreams come true, Dylan Beattie have answered:</p>

<p>“MonoRail would not make my dreams come true. It would however, make my nightmares disappear”</p>

<p>Brilliant.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/01/17/staticmapgenerator-source-is-available">StaticMapGenerator Source Is Available</a></h2>
    <div class="meta">
        <time>on January 17, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/tools" rel="tag">tools</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            
            
        </span>
        
    </div>
    
     <p>The Static SiteMap Generator’s home is in Castle Contrib, and it’s named Castle.Tools.StaticMapGenerator</p>

<p>I’ve just commited it to the repository, so it’s at http://svn.castleproject.org:8080/svn/castlecontrib/Castle.Tools.StaticMapGenerator/trunk/</p>

<p>UPDATE (22/06/2008):The source has slightly moved (to a sub folder):<a href="http://svn.castleproject.org:8080/svn/castlecontrib/Tools/Castle.Tools.StaticMapGenerator/">http://svn.castleproject.org:8080/svn/castlecontrib/Tools/Castle.Tools.StaticMapGenerator/</a></p>

<p>I hope to have time soon to blog about the creation of this little tool, and of the usage. Also, expect a binary soon.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/01/17/staticmapgenerator-for-asp-dot-net-first-teaser">StaticMapGenerator for ASP.NET, First Teaser</a></h2>
    <div class="meta">
        <time>on January 17, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/tools" rel="tag">tools</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>Last night I got frustrated with the fact that I have no intellisense (nor compile time check) for locating static files like .js, .css and image files.</p>

<p>So I sat up and created a simple console application that can generate exactly that, out of the site’s filesystem.</p>

<p>usage:</p>

<p><code>
D:\MyTools\StaticMapGenerator /site:D:\Dev\MySite
</code></p>

<p>it generates a file called Static.Site.Generated.cs within the site’s root folder, and then I go and include that file in my web project.</p>

<p>No I can do stuff like:</p>

<p><code>
&lt;script type="text/javascript" src="&lt;%= Static.Site.Include.Scripts.myscript_js %&gt;"&gt; &lt;/script&gt;&lt;link rel="stylesheet" href="&lt;%= Static.Site.Include.CSS.master_css %&gt;" /&gt;&lt;img alt="Ken Egozi" title="My Logo" src="&lt;%= Static.Site.Include.Images.Logos.my_logo_png" /&gt;
</code></p>

<p>How cool is that?</p>

<p>It works in every ASP.NET compatible web framework (MonoRail, ASP.NET MVC, even WebForms …)</p>

<p>The only prequisite is .NET 2.0 runtime.</p>

<p>Sorry for keeping it out of reach for the moment. I need a little bit of time to setup a svn repository to make the source public (it would of course be BSD/Apache2/MIT thing) and to upload a binary. No promises given, I’ll try to make it in the coming weekend, or even tonight, so stay tuned.</p>

<p>The code is somewhat naive, and certainly does not cover any edge cases, however it’s enough to work cleanly on the largest project I’m currently involved in (Music Glue). Patches to make it more configurable and able to handle more edge cases would be gladly accepted once it’s out.</p>

<p>One cool spot - as part of this, <a href="http://kenegozi.com/Blog/2008/01/17/its-my-turn-to-build-an-ioc-container-in-15-minutes-and-33-lines.aspx">I have also implemented my tiny IoC container in 33 LoC</a>.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/11/29/is-asp-dot-net-mvc-around-the-corner">Is ASP.NET MVC Around the Corner</a></h2>
    <div class="meta">
        <time>on November 29, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>Well, According to <a href="http://weblogs.asp.net/scottgu/archive/2007/11/29/net-web-product-roadmap-asp-net-silverlight-iis7.aspx">Scott Gu</a> we’d be able to download the binaries Next Week,</p>

<p>I can’t wait to put my hands on that, and start finding the possibilities of this framework in conjunction with MonoRail.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/10/17/typed-view-properties-in-monorail-and-aspview">Typed View Properties in MonoRail and AspView</a></h2>
    <div class="meta">
        <time>on October 17, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>Following my last post on the DictionaryAdapter, I’ll demonstrate here how you can get typed access to your views’ properties.</p>

<p>What it requires from you:</p>

<ol>
  <li>
    <p>Declare an interface for each of your views. That is a Good Thing anyway, as designing to a contract is a good best practice, and it allows for easy testing.</p>
  </li>
  <li>
    <p>Have a base class for your controller that would define TypedFlash and TypedPropertyBag. Not mandatory, but very convenient.</p>
  </li>
  <li>
    <p>Use the newest build of AspView. Again - not mandatory, but helpful.</p>
  </li>
</ol>

<p>Now for the showtime.</p>

<p>First we would create a base class for our controllers, with a TypedPropertyBag and TypedFlash properties:</p>

<p><code>
public abstract class Controller&lt;IView&gt; : SmartDispatcherControllerController    where IView : class{    IDictionaryAdapterFactory dictionaryAdapterFactory; IView typedPropertyBag; IView typedFlash; protected IView TypedPropertyBag { get         {             if (typedPropertyBag == null)         typedPropertyBag = dictionaryAdapterFactory.GetAdapter&lt;IView&gt;(PropertyBag);            return typedPropertyBag;         } }  protected IView TypedFlash { get         {             if (typedFlash == null)         typedFlash = dictionaryAdapterFactory.GetAdapter&lt;IView&gt;(Flash);            return typedFlash;         } }  protected override void Initialize() { base.Initialize();        IDictionaryAdapterFactory dictionaryAdapterFactory = new DictionaryAdapterFactory(); }}
</code></p>

<p>tip:</p>

<p>You can look at a <a href="http://using.castleproject.org/display/Contrib/Castle.Tools.CodeGenerator">more complete version of that base-class</a>, written by Lee Henson (who have made some improvements to the original DictionaryAdapter, and also have introduced me to <a href="http://www.peroniitaly.com/">Peroni Beer</a>).The base controller also declares a type parameter for a Session DictionaryAdapter, hooks into the Castle.Tools.CodeGenerator, and uses IoC for DI.Talking about those issues is a separate subject, for other posts.</p>

<p>Now let’s create the view contract. A rather stupid example would be:</p>

<p><code>
public interface IStupidView{ Guid Id { get; set; }    string Name { get; set; }}
</code></p>

<p>controller:</p>

<p><code>
public class StupidController : Controller&lt;IStupidView&gt;{    public void Index()    {    }    public void DoStuff(string name, string password)    {        if (password != "AspView Rocks")        {            TypedFlash.Name = name;            TypedFlash.Message = "Wrong Password";            RedirectToAction("Index");            return;        }        TypedPropertyBag.Id = Guid.NewGuid();        TypedPropertyBag.Name = name;    }}
</code></p>

<p>view (Index.aspx):</p>

<p><code>
&lt;%@ Page Language="C#" Inherits="Castle.MonoRail.Views.AspView.ViewAtDesignTime&lt;IStupidView&gt;" %&gt;&lt;%%&gt;&lt;p&gt;&lt;%=view.Message %&gt;&lt;/p&gt;&lt;form action="DoStuff.rails"&gt;Name: &lt;input type="text" name="name" value="&lt;%= view.Name %&gt;" /&gt; &lt;br /&gt;password: &lt;input type="password" name="password" /&gt; &lt;br /&gt;&lt;input type="submit" /&gt;&lt;/form&gt;
</code></p>

<p>view (DoStuff.aspx):</p>

<p><code>
&lt;%@ Page Language="C#" Inherits="Castle.MonoRail.Views.AspView.ViewAtDesignTime&lt;IStupidView&gt;" %&gt;&lt;%%&gt;The data was: &lt;br /&gt;Id: &lt;%= view.Id %&gt;, Name: &lt;%= view.Name %&gt;
</code></p>

<p>Look at the intellisense (and at my ultra-cool black color scheme):</p>

<p><img src="http://kenegozi.com/Blog/uploaded/WindowsLiveWriter/TypedViewPropertiesinMonoRailandAspView_11288/8d0b77d0-63d6-4e46-b355-c87ae31e5ca4.png" alt="TypedView intellisense" /></p>

<p>Things to notice:</p>

<ol>
  <li>Do not forget to reference the Assembly that has the view interface declaration. On the test site within aspview’s source repository the interface is declared in the Web project (AspViewTestSite), so the web.config has this:</li>
</ol>

<p>view (Index.aspx):</p>

<p><code>
&lt;aspview ... &gt;... &lt;reference assembly="AspViewTestSite.dll"/&gt;...&lt;/aspview&gt;
</code></p>

<ol>
  <li>you can use the DictionaryAdapter directly, on older versions of AspView (and on WebForms aspx/ascx files) by simply grabbing an adapter manually. sample:</li>
</ol>

<p><code>
...&lt;% IMyViewContract view = new Castle.Components.DictionaryAdapter.DictionaryAdapterFactory()       .GetAdapter&lt;IMyViewContract&gt;(Properties); %&gt;...blah blah &lt;%=view.UsefulProperty %&gt;...
</code></p>

<p>Ok, cut the crap. where can I get it?</p>

<p>here (<a href="http://kenegozi.com/Blog/Files/download.aspx?filename=AspView_1.0.3.324_Release.zip">release</a>, <a href="http://kenegozi.com/Blog/Files/download.aspx?filename=AspView_1.0.3.324_Debug.zip">debug</a>, <a href="http://svn.castleproject.org:8080/svn/castlecontrib/viewengines/aspview/trunk/">source</a>)</p>

<p>UPDATE:</p>

<p>The DictionaryAdapter was initially written by the guys from Eleutian as part of Castle.Tools.CodeGenerator. </p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/10/16/typed-session-using-castle-components-dictionaryadapter">Typed Session using Castle.Components.DictionaryAdapter</a></h2>
    <div class="meta">
        <time>on October 16, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            
            
        </span>
        
    </div>
    
     <p>The castle project has a little gem hidden within.</p>

<p>Well, it has many of those, but I’ll refer to one of them here.</p>

<p><a href="http://api.castleproject.org/html/N_Castle_Components_DictionaryAdapter.htm">Castle.Components.DictionaryAdapter</a></p>

<p>This is a tool that can generate typed wrapper around any IDictionary, using a POCI (Plain Old CLR Interface) as a contract. The generation occur on runtime, using Reflection.Emit magic.</p>

<p>Ok, assume you have an information system written in ASP.NET ( warning - WebForms code ahead).</p>

<p>You might keep the current username and a user preferences object in the session.</p>

<p>Somewhere along your application, you’d probably have a pieces of code like that:</p>

<p><code>
public static class TypedSession{    private static HttpSessionState session = HttpContext.Current.Session;    public static string Username     {         get { return (string)session["Username"]; }     }    public static Preferences Preferences     {         get { return (Preferences)session["Preferences"]; }     }}
</code></p>

<p>and in your code you’d be able to do:</p>

<p><code>
...    if (TypedSession.Preferences.Color == Color.Red)        helloLabel.Text = "Hello " + TypedSession.Username;...
</code></p>

<p>Now, I won’t get into those arguments, but generally speaking it would be great if you had an interface to encapsulate your session data (for example - it’s good for testing as you can easily mock session data).</p>

<p>So:</p>

<p><code>
public interface ISession{    string Username { get; set; }    Preferences Preferences { get; set; }}
</code></p>

<p>And use it like that:</p>

<p><code>
...    ISession TypedSession = new DictionaryAdapterFactory().GetAdapter&lt;ISession&gt;(Session);...    if (TypedSession.Preferences.Color == Color.Red)        helloLabel.Text = "Hello " + TypedSession.Username;...
</code></p>

<p>You probably want to put the creation of the TypedSession in a base class.</p>

<p>And you’ve probably noticed that the adapter itself is being acquired through an interfacedFactory, so you can easily use your IoC container of choice to plug in specialized implementations on rare edge cases, and also use your Mock framework of choice for easy testing.</p>

<p>On the next post I’ll show you how well that fit into the world of MonoRail and AspView, as the use of dictionaries is wide (PropertyBag and Flash), and using that library + the newest addition to AspView can grant you with a simple, type safe and intellisense friendly view development experience.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/10/07/some-details-on-the-new-web-mvc-framework-from-microsoft">Some details on the new web MVC framework from Microsoft</a></h2>
    <div class="meta">
        <time>on October 7, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>Now that <a href="http://codebetter.com/blogs/jeffrey.palermo/archive/2007/10/05/altnetconf-scott-guthrie-announces-asp-net-mvc-framework-at-alt-net-conf.aspx">the Big Boys do actually listening to the community, and gives a shot at a solid MVC web framework</a> is a Good Think.</p>

<p>I would really like to see that in action, and would really like to see how they are coming up with stuff that are more than just url-&gt;action wiring, such as parameter bindings, view-components, etc.</p>

<p>It’s going to be interesting, and MonoRail (and) might need some boost to keep being the (imho) no. 1 choice for Web MVC in .NET</p>

<p>It would be interesting also to see where would AspView fit in the new playground.</p>

<p>btw, would that be part of .NET 4.2?</p>

<p>Anyway, since it might take some time to get this new stuff on a production level, I do not believe that no one that works on production system (or those that are supposed to be at production during the coming year) should ditch MR. Even when it’d be out, I might consider MR as a better solution as it’s Open Source, therefore more self twickable, and a lot more responsive in terms of bugfixes.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/10/03/forget-about-reflectoring-the-bcl-the-real-deal-is-here">Forget about Reflector-ing the BCL - the real deal is here</a></h2>
    <div class="meta">
        <time>on October 3, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio" rel="tag">visual-studio</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio-2005" rel="tag">visual-studio-2005</a>
            ,&nbsp;
            
            <a href="/blog/tag/winfx" rel="tag">winfx</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            
            
        </span>
        
    </div>
    
     <p>Another nice <a href="http://weblogs.asp.net/scottgu/archive/2007/10/03/releasing-the-source-code-for-the-net-framework-libraries.aspx">news from Scott Guthrie</a>:</p>

<p>a small excerpt:</p>

<p>Today I’m excited to announce that we’ll be providing this with the .NET 3.5 and VS 2008 release later this year.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/09/11/applicationstart-might-be-unsafe-use-applicationinit-instead">Application_Start Might Be Unsafe - Use Application_Init Instead</a></h2>
    <div class="meta">
        <time>on September 11, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            
            
        </span>
        
    </div>
    
     <p>Following <a href="http://groups.google.com/group/castle-project-users/browse_thread/thread/1a52c649f7418ed9?hl=en#">that thread from Castle Project’s user group</a>, I’m writing that down as to remember that.</p>

<p>Notice that an ASP.NET application mat spawn more than one HttpApplication object. That is, to keep HttpApplication thread safe, thus providing each thread it’s own instance. Now the Start event may fire only during the (logical) application start, rather than on each instance start. Therefore, if you want to hook events, you’d want to do that on the application’s Init event, that would get called for each HttpApplication instance. </p>


    </section>


  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/09/04/better-tips-for-improving-asp-net-performance">Better Tips for Improving ASP.NET Performance</a></h2>
    <div class="meta">
        <time>on September 4, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/client-side" rel="tag">client-side</a>
            
            
        </span>
        
    </div>
    
     <p>So you say “Hey Ken, that’s not fair. Ranting about the bad performance tipsisn’t good enough. We want GOOD tips”.</p>

<p>I won’t say that those are necessarily GOOD tips, however they are probably BETTER.</p>

<p>without further ado, I’ll quickly pull out of my hat my somewhat better tips:</p>

<ol>
  <li>
    <p>Learn to use caching, both for dynamic and static content.</p>
  </li>
  <li>
    <p><strong>TURN OFF ViewState (and ControlState)</strong>. Find better solutions. Really. You do not need the viewstate to get txtName.Text. Just use the damn Form[“txtName”], or writeTypeSafe wrapper around the Form (or Request.Items) collection. </p>
  </li>
  <li>
    <p>Learn SQL. </p>
  </li>
  <li>
    <p>Use caching.</p>
  </li>
  <li>
    <p>ADD Client-side validation to the Server side validation. DO NOT remove server side validation, as every javascript beginner can bypass client-side stuff.</p>
  </li>
  <li>
    <p>Avoid SELECT+N. </p>
  </li>
  <li>
    <p>Cache responses where appropriate.</p>
  </li>
  <li>
    <p>Have as least external files as you can. Join all .js to one file. join all .css to one file. It takes a LOT more time for the browser to open a connection to the server, that to actually get those lousy extra 5k. And out-of-the-box, browsers can have a maximum of 2 connections to the server at once.</p>
  </li>
  <li>
    <p>Cache DB queries when appropriate</p>
  </li>
  <li>
    <p>Enable GZip on IIS</p>
  </li>
  <li>
    <p>Use the “COUNT” keyword in SQL, rather than the”Count” or “Length” .NET properties</p>
  </li>
  <li>
    <p>Did I mention caching?</p>
  </li>
  <li>
    <p>Avoid Page where it can be replaced with an IHttpHandler. That code is BAD:</p>
  </li>
</ol>

<p><code>
public class SomePage : System.Web.UI.Page{    protected void Page_Load(object sender, EventArgs e)    {        Response.Clear();        Response.Write(something);    }}
</code></p>


    </section>


  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/09/04/bad-tips-to-improve-asp-net-application-performance">Bad Tips To Improve ASP.NET Application Performance?</a></h2>
    <div class="meta">
        <time>on September 4, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/client-side" rel="tag">client-side</a>
            
            
        </span>
        
    </div>
    
     <p>Wow.</p>

<p>Take a look at <a href="http://www.realsoftwaredevelopment.com/2007/08/20-tips-to-impr.html">that tip sheet</a>.</p>

<p>Are these guys serious?</p>

<p>Best quotes:</p>

<p><strong>3. Avoid Server-Side Validation</strong>Try to avoid server-side validation, use client-side instead. Server-Side will just consume valuable resources on your servers, and cause more chat back and forth.</p>

<p>huh?</p>

<p><strong>12. Caching is Possibly the number one tip!</strong>Use Quick Page Caching and the ASP.net Cache API! Lots to learn, its not as simple as you might think. There is a lot of strategy involved here. When do you cache? what do you cache?</p>

<p>if it’s no. one tip (and it is), why is it numbered 12?  </p>

<p><strong>20. Option Strict and Option Explicit</strong>This is an oldy, and not so much a strictly ASP.net tip, but a .net tip in general. Make sure you turn BOTH on. you should never trust .net or any compiler to perform conversions for you. That’s just shady programming, and low quality code anyway. If you have never turned both on, go turn them on right now and try and compile. Fix all your errors.</p>

<p>what’s that has to do with performance?</p>

<p>I just can’t believe that CodeProject has linked to that article.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/08/07/aspnet-ajax-updatepanel-challenge">ASP.NET Ajax UpdatePanel Challenge</a></h2>
    <div class="meta">
        <time>on August 7, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/client-side" rel="tag">client-side</a>
            ,&nbsp;
            
            <a href="/blog/tag/html" rel="tag">html</a>
            ,&nbsp;
            
            <a href="/blog/tag/javascript" rel="tag">javascript</a>
            
            
        </span>
        
    </div>
    
     <p>Actually, it’s not much of a challenge, but it is a catchy title.</p>

<p>Or is it?</p>

<p>Anyway, that’s the details:</p>

<p>I’d kindly ask all of you ASP.NET Ajax wiz guys (and gals), to supply me with a simple UpdatePanel thing.</p>

<p>What should it do?</p>

<p>I want to have a webpage, based on<a href="http://kenegozi.com/blog/uploaded/UpdatePanelTemplate.html">this template</a>, that on dropdown change, will go to the server with the selected value in the dropdown, and update the data (table) with some crap, based on the sent value.</p>

<p>You can leave the actual data retrieval to a simple method returning an array of string array, or you can go and implement a CodeSmith/DAAB/Whatever based supercool data access code. I would ignore it anyway. I want the Ajax stuff.</p>

<p>Now, to the why.</p>

<p>I am doing that MonoRail presentation at Microsoft’s Israel IVCUG (Israel Visual C(#/++) User Group) next week. I might be showing some demos, and I want to be fare when I show a comparison to WebForms stuff, and not come up with a crappy code and say “ha ha”, but show something that one of you, my-dear-readers-who-actually-uses-asp-net-ajax-for-living, wrote, and is considered a good example.</p>

<p>Also, I’m lazy. Seriously. Creating a presentation takes a LOT of time and effort, and I do not have much of the first, and rather avoid much of the later.</p>

<p>So, please do send me that code, to my-first-name at that-blog’s-hostname.</p>

<p>thanks.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/07/08/checkbox-grids-in-monorail">Checkbox Grids in MonoRail</a></h2>
    <div class="meta">
        <time>on July 8, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>Referring <a href="http://weblogs.asp.net/jgalloway/archive/2007/07/07/checkbox-grids-in-asp-net.aspx">Jon Galloway’s post</a>, here is my 5-minute-scracth-up-somthing that includes no hacking at all:</p>

<p>The Controller:</p>

<p><code>
publicclassGourmetController : SmartDispatcherController
    {
        [AccessibleThrough(Verb.Get)]
        publicvoid WineMatch()
        {
            PropertyBag["matches"] = FoodAndWineMatchRepository.FindAll();
        }
        [AccessibleThrough(Verb.Post)]
        publicvoid Update([DataBind("matches")]FoodAndWineMatch[] matches)
        {
            FoodAndWineMatchRepository.UpdateAll(matches);
            RedirectToAction("WineMatch");
        }
    }
</code></p>

<p>The View:</p>

<p>```
&lt;%@PageLanguage=”C#”%&gt;
&lt;%@ImportNamespace=”Gourmet”%&gt;
&lt;%
    FoodAndWineMatch[] matches;
%&gt;
&lt;%
    IDictionary @checked = DictHelper.CreateDict(“checked=’checked’”);
%&gt;
&lt;formaction=”Update.aspx”method=”post”&gt;</p>
<table>
<tr>
<th>Food Name</th>
<th>Cabarnet</th>
<th>Zinfandel</th>
<th>Pinot</th>
</tr>
&lt;%int i = 0; %&gt;
&lt;%foreach (FoodAndWineMatch match in matches)  { %&gt;
<tr>
<td>
<span>&lt;%=match.FoodName%&gt;</span>
&lt;inputtype="hidden"name="matches[&lt;%=i%&gt;].FoodName"value="&lt;%=matches[i].FoodName%&gt;"/&gt;
</td>
<td>
&lt;%=FormHelper.CheckboxField("matches[" + i + "].MatchesCabarnet", matches[i].MatchesCabarnet?@checked:null)%&gt;
</td>
<td>
&lt;%=FormHelper.CheckboxField("matches[" + i + "].MatchesZinfandel", matches[i].MatchesZinfandel?@checked:null)%&gt;
</td>
<td>
&lt;%=FormHelper.CheckboxField("matches[" + i + "].MatchesPinot", matches[i].MatchesPinot?@checked:null)%&gt;
</td>
</tr>&lt;%++i; } %&gt;
<tr>
&lt;tdcolspan="4"&gt;
&lt;inputtype="submit"value="Save"/&gt;

</tr>
</table>
<p>&lt;/form&gt;</p>

<p>```</p>

<p>And the mocked “domain objects”:</p>

<p>```
publicclassFoodAndWineMatch
    {
        privatestring foodName;
        privatebool matchesCabarnet;
        privatebool matchesPinot;
        privatebool matchesZinfandel;</p>

<pre><code>    public FoodAndWineMatch() { }
    public FoodAndWineMatch(string foodName)
        :
        this(foodName, false, false, false) { }
    public FoodAndWineMatch(string foodName,
                            bool matchesCabarnet,
                            bool matchesPinot,
                            bool matchesZinfandel)
    {
        this.foodName = foodName;
        this.matchesCabarnet = matchesCabarnet;
        this.matchesZinfandel = matchesZinfandel;
    }

    publicstring FoodName
    {
        get { return foodName; }
        set { foodName = value; }
    }

    publicbool MatchesCabarnet
    {
        get { return matchesCabarnet; }
        set { matchesCabarnet = value; }
    }

    publicbool MatchesPinot
    {
        get { return matchesPinot; }
        set { matchesPinot = value; }
    }

    publicbool MatchesZinfandel
    {
        get { return matchesZinfandel; }
        set { matchesZinfandel = value; }
    }
}
publicstaticclassFoodAndWineMatchRepository
{
    privatestaticFoodAndWineMatch[] _matches = null;
    publicstaticFoodAndWineMatch[] FindAll()
    {
        if (_matches == null)
            _matches = newFoodAndWineMatch[] {
            newFoodAndWineMatch("Salmon"),
            newFoodAndWineMatch("Steak"),
            newFoodAndWineMatch("Chicken"),
            newFoodAndWineMatch("Chocolate")
        };
        return _matches;
    }
    publicstaticvoid UpdateAll(FoodAndWineMatch[] matches)
    {
        _matches = matches;
    }
}
</code></pre>

<p>```</p>

<p>No hacking needed. Controller code is short and intuitive. </p>

<p>Oh. No postback for every client click …</p>

<p>I especiallyliked one of the comments on Jon’s post:</p>

<p>I love ASP.NET because of tricks like this that the developer can use.</p>

<p>Well, Ido not likeWebForms <strong>because</strong> it makes me “do tricks” (or hack) instead of bringing business value.</p>

<p>So I do not mean that Jon’s “hack” is bad. That’s what you have to do when you’re WebForm-ing. I just say that there are other web development frameworks (actually, all but WebForms) that are more suited for reasonable html generation and for dealing with the http protocol.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/06/28/redirecting-syndication-link-from-dasblogs-one-to-the-new-one">Redirecting syndication link from dasBlog's one to the new one</a></h2>
    <div class="meta">
        <time>on June 28, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/blog-engine" rel="tag">blog-engine</a>
            
            
        </span>
        
    </div>
    
     <p>TodayI was informed by <a href="http://blogs.microsoft.co.il/blogs/drorengel/">Dror</a> that although I managed to redirect all requests to html/aspx url’s on my blog (the ones that dagBlog was using) to the new pemalink format, I forgot to do the same for the old syndication link.</p>

<p>So that link was <a href="http://kenegozi.com/blog/SyndicationService.asmx/GetRss">http://kenegozi.com/blog/SyndicationService.asmx/GetRss</a>and now it’s <a href="http://kenegozi.com/Blog/Syndication/Atom.aspx">http://kenegozi.com/Blog/Syndication/Atom.aspx</a></p>

<p>I could’ve used the monorai redirection module that is already in use on my blog, but I chose to do it differently, with a dedicated handler, just to show how easy it is do to such stuff, even without a full blown redirection engine.</p>

<p>So, I’ve added this:</p>

<p>```
publicclassSyndicationRedirectionHandler : IHttpHandler 
{
    #region IHttpHandler Members
    publicbool IsReusable
    {
        get { returntrue;}
    }</p>

<pre><code>publicvoid ProcessRequest(HttpContext context)
{
    context.Response.StatusCode = 301;
    context.Response.Redirect("http://kenegozi.com/Blog/Syndication/Atom.aspx");
}

#endregion } ```
</code></pre>

<p>and that line into web.config:</p>

<p>&lt;addverb=”*“path=”SyndicationService.asmx”type=”KenEgozi.Com.Weblog.SyndicationRedirectionHandler, KenEgozi.Com.Weblog”/&gt;</p>

<p>Voila.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/06/11/default-value-for-value-type-parameter-in-aspview-does-not-work">Default value for value type parameter in AspView does not work</a></h2>
    <div class="meta">
        <time>on June 11, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            ,&nbsp;
            
            <a href="/blog/tag/blog-engine" rel="tag">blog-engine</a>
            
            
        </span>
        
    </div>
    
     <p>Today we tried to have this in a view’s parameters section:</p>

<p>&lt;%</p>

<p>int id = default(int);</p>

<p>%&gt;</p>

<p>It won’t work. </p>

<p>Internally, AspView looks for a parameter (in the PropertyBag, Flash, Form, QueryString etc.) with the name “id”.</p>

<p>Now if it is not found, it should set to “default(int)”. The problem is duw to a bug in AspViewBase (which is the base class for all views) that sets a null value if the property is not found, thus failing the cast to value type (you cannot (int)null).</p>

<p>I’ll add a test, fix the bug, and commit it, hopefully by this weekend.</p>

<p>Meanwhile, we “solved” the problem by using:</p>

<p>&lt;%</p>

<p>object id = default(int);</p>

<p>%&gt;</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/05/20/a-new-version-of-aspview-07">A new version of AspView - 0.7</a></h2>
    <div class="meta">
        <time>on May 20, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/tools" rel="tag">tools</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>I’ve just commited to the repository a new version of AspView.</p>

<p>The main addition is “Auto Recompilation” feature.</p>

<p>This means that when you change one of the view sources, the application will automatically recompile the views upon the following request.</p>

<p>You enable the feature by adding the next attribure to the aspview config section in web.config:</p>

<p><code>
&lt;aspview .... autoRecompilation="true" ... &gt; ...&lt;/aspview&gt;
</code></p>

<p>Breaking change:</p>

<p>If you happen to reference an assembly from the GAC (using the aspview configuration in the web.config) you need to add a hint for the engine, like this:</p>

<p><code>
&lt;reference assembly="MyAssemblyFromGAC.dll" isFromGac="true" /&gt;
</code></p>

<p>Known issues:</p>

<ol>
  <li>
    <p>You need to let ASPNET user (or the Application Pool user) a modify access on the bin folder.Note that if you use the inner WebServer of Visual Studio this should not be a problem, since in that case the web application runs with your user, that has the needed peremissions on the bin folder.</p>
  </li>
  <li>
    <p>For a strange reason, after you change a view and do the F5 in the browser, you still see the old version, and only on second F5 will the views be actually recompiled and refreshed. I hope to fix it soon …</p>
  </li>
</ol>

<p>Download from <a href="http://kenegozi.com/blog/uploaded/AspView_0_7_178.zip">here</a>.</p>

<p>Sources are <a href="http://svn.castleproject.org:8080/svn/castlecontrib/viewengines/aspview/trunk/">here</a>.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/03/17/monorail-is-gaining-interest">MonoRail is gaining interest</a></h2>
    <div class="meta">
        <time>on March 17, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>I’d like to point you to a <a href="http://www.hanselminutes.com/default.aspx?showID=71">new podcast from HanselMinutes, about MonoRail</a>. Scott Hanselman is interviewing a couple of guys from Eluetian as MonoRail Power Users. Theyare doing a lot of workwith MonoRail using Brail. </p>

<p>Listen to that if you want to hear about how simple MVC for ASP.NET can be.</p>

<p>Actually, It seams that it is getting so much attention, that even MSFT are thinking about implementing something Rails-i in the future ASP.NET. <a href="http://codebetter.com/blogs/jeffrey.palermo/archive/2007/03/16/Big-News-_2D00_-MVC-framework-for-ASP.NET-in-the-works-_2D00_-level-300.aspx">Read this if you do not believe me</a>.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/12/10/some-improvements-in-aspview-revision-47-is-out">Some improvements in AspView - revision 47 is out</a></h2>
    <div class="meta">
        <time>on December 10, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>What’s new?</p>

<ol>
  <li>
    <p>siteRoot has been added to AspViewBase, so you can ditch the “string siteRoot” from the declerations area.</p>
  </li>
  <li>
    <p>Some permormance improvements. Instead of using “Activator.CreateInstance” everytime a view is to be rendered, a hashtable with ConstructorInfo objects is generated upon reading CompiledViews.dll. This was taken from the c# version of Brail</p>
  </li>
  <li>
    <p>A new syntax for subviews:</p>
  </li>
</ol>

<p>you can use </p>

<p><code>
   1:  &lt;subView:MyMenu item="menuItem"&gt;&lt;/subView:MyMenu&gt;
</code></p>

<p>instead of </p>

<p><code>
   1:  &lt;% OutputSubView("MyMenu", Helper.Dict("item", "menuItem")); %&gt;
</code></p>

<p>take note the <subview:blah></subview:blah> is not currently allowed. I’ll fix it shortly.</p>

<p>the link is <a href="http://kenegozi.com/blog/GetFile.ashx?FileName=AspView_rev47.zip">here</a></p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/12/03/things-ive-been-doing-lately">Things I've been doing lately</a></h2>
    <div class="meta">
        <time>on December 3, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/client-side" rel="tag">client-side</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/activerecord" rel="tag">activerecord</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>I’ve been off the radar lately, due to some extensive work I do on a website for my employer.</p>

<p>It is still in early stages and I cannot talk about the site itself, but I can talk a little about the technology that drives it.</p>

<p>In one word: Castle.</p>

<p>In a few more words: </p>

<p>Data Access and OR/m: Castle’s ActiveRecord over NHibernate</p>

<p>Web UI Engine: Castle’s MonoRail</p>

<p>ViewEngine: <a href="http://kenegozi.com/blog/2006/11/27/AspViewRev38IsOut.aspx">AspView</a> (by yours truely, inspired by Ayende’s <a href="http://www.ayende.com/projects/brail.aspx">Brail</a>). All my spare time from work goes there.</p>

<p>Client Side Javascript stuff: <a href="http://prototype.conio.net/">Prototype</a> and <a href="http://script.aculo.us/">Scriptaculous</a>.</p>

<p>I really believe in the efforts made by Castle group, and I hope the the site I’m working on will be successful, as to serve for yet another prove of concept.</p>

<p>One more thing I’m doing last month, is that I’ve decided to finally end the thing with my Bachelor’s degree. I needed to retake Linear Algebra I (yep, that one the all the non-bullet-time Matrixes … I H-A-T-E adjoined matrixes. yuck) so that’s actually why AspView doesn’t progress as I’d want it too (and as some of my readers want, too).</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/11/27/aspview-rev-38-is-out">AspView rev 38 is out</a></h2>
    <div class="meta">
        <time>on November 27, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio" rel="tag">visual-studio</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio-2005" rel="tag">visual-studio-2005</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>What we have:</p>

<ol>
  <li>
    <p>Default Helpers are now declared in the AspViewBase. It means that you can use &lt;%=FormHelper.LabelFor(…) %&gt; without the need to declare the helper at the begining of the view.</p>
  </li>
  <li>
    <p>the compiler was refactored to allow for better testing, and for implementation of further view languages. vurrently I’ve started with VB.NET but it is not working yet, since I have no time to make sure the VB syntax is correct. The tests of the compiler are missing due to some stupidity on my side, of not commiting the TestCase …</p>
  </li>
</ol>

<p>I’ve wanted to let svn access but I have some trouble with that. I’ve started a sourceforge project but I cannot upload the repo to the site. I did all they’ve asked on the site but the import process reporting failure no matter what I do. I guess that the best way will be if the Castle team would allow AspView into it’s codebase, maybe on the Contrib repo to begin with …</p>

<p>So meanwhile you can download the current bits from <a href="http://kenegozi.com/blog/GetFile.ashx?FileName=AspView_rev38.zip">here</a>.</p>

<p>Keep me posted,</p>

<p>Ken.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/11/16/aspview-first-release">AspView - first release</a></h2>
    <div class="meta">
        <time>on November 16, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio" rel="tag">visual-studio</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio-2005" rel="tag">visual-studio-2005</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>So I’m releasing <a href="http://kenegozi.com/blog/2006/11/14/AspViewYetAnotherMonoRailViewEngine.aspx">AspView</a>.</p>

<p>You can download the source from <a href="http://kenegozi.com/blog/GetFile.ashx?FileName=AspView_rev20.zip">here</a>.</p>

<p>It was written against the Castle 1.1 from the trunk, build no. 152.</p>

<p>Please note that in order to run the TestCases you’d have to make sure that the latest Castle.MonoRail.TestSupport is in the GAC.</p>

<p>The documentation is poor since I have a little time now. I am working on a website for my employer (that utilizes AspView and AR) and until the first beta release I won’t have time to do anything but major bugfixes. This project isn’t open sourced so I won’t be able to share it’s sources, however since this will be a public site, it would serve as a Proof Of Concept to the MonoRail and AspView.</p>

<p>The views MUST have the following structure: a. Page header - Must be present for intellisense to work:</p>

<p><code>
   1:  &lt;%@ Page Language="C#" Inherits="Castle.MonoRail.Views.AspView.ViewAtDesignTime"%&gt;
</code></p>

<p>b. Directives - Not mandatory:</p>

<p><code>
   1:  &lt;%@ Import Namespace="System.Text"%&gt;   2:  &lt;%@ Import Namespace="System.Drawing"%&gt;
</code></p>

<p>c. Properties decleration - Currently it’s mandatory. If you have no properties you mast have an empty block:</p>

<p><code>
   1:  &lt;%   2:  string[] strings;   3:      DateTime today;   4:  int index;   5:  %&gt;
</code></p>

<p>or just</p>

<p><code>
   1:  &lt;%   2:  %&gt;
</code></p>

<p>d. View body</p>

<p>In a layout view you place the inner view using the ViewContents property, like this:</p>

<p><code>
   1:  blah   2:  blah   3:  &lt;%=ViewContents%&gt;   4:  blah   5:  blah
</code></p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/11/14/aspview-yet-another-monorail-viewengine">AspView - Yet another MonoRail ViewEngine</a></h2>
    <div class="meta">
        <time>on November 14, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio" rel="tag">visual-studio</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio-2005" rel="tag">visual-studio-2005</a>
            ,&nbsp;
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            ,&nbsp;
            
            <a href="/blog/tag/aspview" rel="tag">aspview</a>
            
            
        </span>
        
    </div>
    
     <p>.hlt { background-color:yellow;}<br />
So what is AspView?</p>

<p>It is a Visual Studio 2005 friendly ViewEngine implementation.</p>

<p>The scripting is done using VisualStudio languages (c# and VB.NET). The views are precompiled, (or can be compiled on-demand, but anyway not interpreted).</p>

<p>The project was inspired by the <a href="http://www.castleproject.org/monorail/documentation/trunk/viewengines/brail/index.html">Brail ViewEngine</a>, but since it doesn’t use <a href="http://boo.codehaus.org/">Boo</a> it is more Management-Friendly, since they need not worry about getting out of the “safe” microsoft world.</p>

<p>I tend to like Boo as a language very much, and <a href="http://kenegozi.com/blog/2006/09/20/MyPresentationLayerOfChoiceBrailOverCastlesMonoRail.aspx">I like Brail</a> a lot, too (since it allows for less code in the view thanks to the Boo magic) but I lack the tight Visual Studio integration (opening .boo files in #Develop messes up my desktop), and the intellisense is quite important, at least for the developers I worl with.</p>

<p>So I will post in the next few days about it, and I’ll make it available to be downloaded (source and binary) as soon as I’ll test it a little more. I hope to have a public svn repository soon.</p>

<p>A little demo view:</p>

<p><code>
   1:  &lt;%@ Page Language="C#" Inherits="Castle.MonoRail.Views.AspView.ViewAtDesignTime"%&gt;   2:  &lt;%   3:  string[] strings;   4:  %&gt;   5:     6:     7:  hello from index&lt;br /&gt;   8:  This are the strings:&lt;br /&gt;   9:  &lt;%foreach (string s in strings) { %&gt;  10:  &lt;%=s %&gt;&lt;br /&gt;  11:  &lt;%  } %&gt;  12:    13:  &lt;br /&gt;  14:  End of normal view  15:  &lt;br /&gt;  16:  &lt;% OutputSubView("Home/SubViewSample"); %&gt;
</code></p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/11/05/building-application-using-castle-rc2">Building Application using Castle RC2</a></h2>
    <div class="meta">
        <time>on November 5, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/architecture" rel="tag">architecture</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/activerecord" rel="tag">activerecord</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>Ayende has recently posted a walkthrough for building Web Apps using the Castle Project’s libraries.</p>

<p>He covers ActiveRecord and MonoRail basics, showing off some of the shiny and new abilities (AR scaffolding, ARSmartDispatchers, Generics integration and so on).</p>

<p>The only thing missing is IoC-ing using Winsdor or even Binsdor. Maybe to hook some BL layer or something.</p>

<p>So it concludes (as of now) a <a href="http://www.ayende.com/Blog/BuildingApplicationsUsingCastleRC2PartI.aspx">Part I</a>, <a href="http://www.ayende.com/Blog/BuildingApplicationsUsingCastleRC2PartII.aspx">Part II</a> , and <a href="http://www.ayende.com/Blog/DemoCodeForCastleForumsDemoApp.aspx">source-code</a>.</p>

<p>If you wanna see a decent web development framework at action - tune up to those posts.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/10/26/monorail-vs-webforms">MonoRail vs. WebForms</a></h2>
    <div class="meta">
        <time>on October 26, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/activerecord" rel="tag">activerecord</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>Ayende <a href="http://www.ayende.com/Blog/MonoRailVsASPNet.aspx">has posted about the matter</a>, only he’ve used the title “MonoRail vs. ASP.NET” instead. I think that his title isn’t accurate since MonoRail is actually a WebForms replacement that is built ontop of ASP.NET, exploiting all of the cool features found in ASP.NET and in the .NET framework alltogether. It’s the Web development framework that Microsoft forgot. So it has the benefits of the Rails interpretaion for MVC, with the power of .NET.</p>

<p>Here is the comment I’ve posted to Ayende’s post:</p>

<p>“My point of argue in favor of MR for people who are afraid of “non-microsoft” is, that actually MR is ASP.NET. It is just not WebForms. You get all the good stuff from ASP.NET: the .NET framework for start, compiled views (on Brail - kudos to you), the HttpModule stuff, seeamless integration with AR. This is what I say to the PMs, etc. To the developers themselves who are afraid, There’s a more detailed approach. Developers (especially ones who didn’t do web programming aside ASP.NET, and probably has a lot of VB experience but no PHP/JSP/ASP) like WebForms cuz they can get to the txtUsername.Text, txtPassword.Text, and txtAge.Text easily, not needing Request.Form[“Password”] (hey - it’s not typed !!!) . But then I reffer them to the fact that actually txtAge.Text isn’t typed too. it’s a string, and should be parsed, tried, validated etc. They should also manually create a User instance, and fill it’s properties. Doing the same on MR with Dispatching and AR is there without any line of code. I show them an example aqnd then hold them as they almost fall off their chairs. Not’n like a good example. Maybe having a ViewEngine that’s use c# or VB.NET instead of boo (not the WebForm ViewEngine which suck, but somthing similar to Brail) can make the move from WebForms to easier for developers, but frankly, as you’ve said, people who can’t get it OJT with a few examples aren’t the one’s I’m likely to work with anyway.”</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/10/21/aspnet-ajax-aka-atlas-is-maturing-and-reached-beta-1-stage">ASP.NET Ajax (aka ATLAS) is maturing and reached Beta 1 stage</a></h2>
    <div class="meta">
        <time>on October 21, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/castle" rel="tag">castle</a>
            ,&nbsp;
            
            <a href="/blog/tag/monorail" rel="tag">monorail</a>
            
            
        </span>
        
    </div>
    
     <p>As said in the title, ASP.NET Ajax (aka ATLAS) is maturing and reached Beta 1 stage.</p>

<p>I haven’t being too mush into it lately, since I’ve beenunder the impression that though Microsoft’s ASP.NET Ajax library was very rich and had many features, it also suffered from many childhood problems, including too many js errors, and a huge .js script to download.</p>

<p>Now, it has an official name, and a beta release, and it’s maturing. The .js was split by functionality, release and debug version of the .js are present, prototyped classes have replaced the closure based ones, and it’s better for me cuz I find it easier to <em>overload</em> behaviuors when needed.</p>

<p>So <a href="http://ajax.asp.net/default.aspx?tabid=47&amp;subtabid=471">try it out</a>and read what <a href="http://weblogs.asp.net/scottgu">Scott Guthrie</a> has to <a href="http://weblogs.asp.net/scottgu/archive/2006/10/20/ASP.NET-AJAX-Beta-1-Released.aspx">say about it</a>.</p>

<p>Since nowadays I’m more into <a href="http://www.castleproject.org/index.php/MonoRail">MonoRail</a> over <a href="http://www.ayende.com/projects/brail.aspx">Brail</a> than into Webforms, I guess that the Core package is what really intresting for me, and I’ll try to combine it with <a href="http://wiki.castleproject.org/monorail/documentation/trunk/helpers/ajax/index.html">AjaxHelper</a> from MonoRail. I hope to report on the matter shotrly.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/08/17/atlas-naming-game">Atlas naming game</a></h2>
    <div class="meta">
        <time>on August 17, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/client-side" rel="tag">client-side</a>
            ,&nbsp;
            
            <a href="/blog/tag/miscellanea" rel="tag">miscellanea</a>
            
            
        </span>
        
    </div>
    
     <p>There is a nice post about naming the Atlas package, at <a href="http://aspadvice.com/blogs/ssmith/archive/2006/08/16/Atlas_Naming_Game.aspx">http://aspadvice.com/blogs/ssmith/archive/2006/08/16/Atlas_Naming_Game.aspx</a></p>

<p>There are some funny comments there, so do not miss.</p>

<p>And that is my comment:</p>

<p>“I think that too descriptive names suck.</p>

<p>I’d go with any non-descriptive name, such as the ones MS uses as codenames (I loved Avalon and so on).I believe that from the marketing point of view, non-descriptive catchy names ar far better than the others.It’s like dice.com and monster.com doesn’t include “job” in their name.</p>

<p>But since MS are determined to use descriptive names, at least they should concentrate on the “what” and not on the “how”.so “Async XmlHttp Enabled Web Apps” (AXEWA ?) is bad, while “Dynamic Web Browsing” is better.”</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/08/03/aspnet-20-tips-tricks-recipes-and-gotchas-by-scott-guthrie">ASP.NET 2.0 Tips, Tricks, Recipes and Gotchas - By Scott Guthrie</a></h2>
    <div class="meta">
        <time>on August 3, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio" rel="tag">visual-studio</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio-2005" rel="tag">visual-studio-2005</a>
            
            
        </span>
        
    </div>
    
     <p>Scott Guthrie has recently posted <a href="http://weblogs.asp.net/scottgu/pages/ASP.NET-2.0-Tips_2C00_-Tricks_2C00_-Recipes-and-Gotchas.aspx">this</a>. He is pointing out to a few dozens of posts about ASP.NET 2.0.</p>

<p>The stuff there ranges from UI tweaks, security, performance, VS2005 tips and more.</p>

<p>A “must be in the favorites or even as a desktop shortcut preferably with keyboard shortcut too” for everyone who deals with ASP.NET developing.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/06/22/blinq-a-simple-web-gui-generator-using-dlinq-as-an-orm-and-aspnet-20-bound-controls-as-ui-building-blocks">BLinq - a simple web GUI generator using DLinq as an ORM and ASP.NET 2.0 bound controls as UI building blocks</a></h2>
    <div class="meta">
        <time>on June 22, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/linq" rel="tag">linq</a>
            
            
        </span>
        
    </div>
    
     <p>If you’re into automated generation of data manipulation UI, then you must check out BLinq, written by Polita Paulus of Microsoft, at <a href="http://www.asp.net/sandbox/app_blinq.aspx?tabid=62">http://www.asp.net/sandbox/app_blinq.aspx?tabid=62</a></p>

<p>In short, it uses DLinq to generate a DAL, and then builds simple ASP.NET pages using GridView and DetailsView Controls (developed by Polita herself), to manipulate all of the tables from the database.</p>

<p>In my opinion, it serves as a great prove of concept for the whole ASP.NET and Linq technologies, as the fastest RAD tool for web application development.</p>

<p>Just build a database, and in an eye Blinq, you have a way to manipulate it through web app.</p>

<p>I find it great. Aren’t you?</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/05/21/using-external-controllers-to-emulate-multiinheritance-in-the-presentation-layer">Using external controllers to emulate multi-inheritance in the presentation layer</a></h2>
    <div class="meta">
        <time>on May 21, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/architecture" rel="tag">architecture</a>
            
            
        </span>
        
    </div>
    
     <p>The web application that we’re working on now, uses ASP.NET 2.0’s ObjectDataSource model, to bind to GridView and FormView in the front-end.Starting off, I’ve made a hierarchy of base classes to manage the data-binding and visual behaviors for Entity Pages (used to view, edit or insert a single entity) and Master-Details Pages (used to manage Master-Details scenarios).The base classes looked like:</p>

<p><code>
class BasePage : Page { /* ... */ }class BaseEntityPage&lt;T&gt; : BasePagewhere T: Entity{public BaseEntityPage(){/// hook ObjectDataSource and FromView databind events}//... }class BaseMasterDetailsPage&lt;T&gt; : BaseEntityPage&lt;T&gt;where T: Entity{public BaseMasterDetailsPage() : base(){/// hook GridView databind events}//... }
</code></p>

<p>Somewhere along the road, we’ve decided to change the first module being developed, to use ascx controls in a single page, instead of multiple pages in a master page (due to the fact that it became a nested master page, and vs2005 doesn’t like it).So, a developer working on the change from Pages to UserControls, changed the base class to something like that:</p>

<p><code>
class BaseUserControl : UserControl { /*...*/ }class BaseEntityUserControl&lt;T&gt; : BaseUserControlwhere T: Entity{public BaseEntityUserControl(){/// hook ObjectDataSource and FromView databind events}//... }class BaseMasterDetailsUserControl&lt;T&gt; : BaseEntityUserControl&lt;T&gt;where T: Entity{public BaseMasterDetailsUserControl() : base(){/// hook GridView databind events}//... }
</code></p>

<p>Later on, we needed some standalone pages (not “mastered”) to have data capabilities.We already had the databinding for UserControls, but now we would need to create empty “dummy” pages and host UserControls in them, which means that instead of aspx + aspx.cs files per page, we’ll have aspx + aspx.cs + ascx + ascx.cs files !!!We could always keep the BasePage hierarchy next to the BaseControl hierarchy, but it will create an ugly duplication.If Multi-Inheritance was possible, we would have used something like:</p>

<p><code>
class EntityController { /* ... */ }class BaseEntityPage&lt;T&gt; : BasePage, EntityController { /* ... */ }class BaseEntityUserControl&lt;T&gt; : BaseUserControl, EntityController { /* ... */ }
</code></p>

<p>The solution is to use an external controller, we’ll call the Manager, to do all the recurrent login that applies to both the Pages an the UserControls.We’ll use an EntityManager that will manage both BaseEntityPages and BaseEntitycontrols, and a MasterDetailsManager that will manage BaseMasterDetailsPages and BaseMasterDetailsControls. Each and every page and UserControl will register itself with a manager.Now the base class look like that:</p>

<p><code>
class EntityManager&lt;T&gt; {}class MasterDetailsManager&lt;T&gt; : EntityManager&lt;T&gt; { }class BaseEntityPage&lt;T&gt; : BasePagewhere T: Entity{private EntityManager&lt;T&gt; manager;public BaseEntityPage(){manager =new EntityManager&lt;T&gt;(this);}//... }class BaseMasterDetailsPage&lt;T&gt; : BaseEntityPage&lt;T&gt;where T: Entity{public BaseMasterDetailsPage() // not calling base() cuz we need a different manager{manager =new MasterDetailsManager&lt;T&gt;(this);}//... }class BaseEntityUserControl&lt;T&gt; : BaseUserControlwhere T: Entity{private EntityManager manager;public BaseEntityUserControl (){manager =new EntityManager&lt;T&gt;(this);}//... }class BaseMasterDetailsUserControl&lt;T&gt; : BaseEntityUserControl&lt;T&gt;where T: Entity{public BaseMasterDetailsUserControl () // not calling base() cuz we need a different manager{manager =new MasterDetailsManager&lt;T&gt;(this);}//... }
</code></p>

<p>All the databinding logic and visual behavior control, is now placed in the managers classes, and the page or control itself, is only dealing with the things that are specifically needed by it.The developers on the team, when creating a new page or UserControl, only need to register their page or control to the appropriate manager, and not to mind all the databinding and behavior stuff.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/02/23/running-aspnet-applications-of-various-versions-sidebyside">Running ASP.NET applications of various versions side-by-side</a></h2>
    <div class="meta">
        <time>on February 23, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            
            
        </span>
        
    </div>
    
     <p>Some annoying problem I’ve encountered lately.While developing on my XP machine, I have had some ASP.NET 1.1 applications and ASP.NET 2.0 applications running side-by-side, as virtual directories on the single website allowed by IIS5.1</p>

<p>When I’ve published an ASP.NET 2.0 application to a production server, running IIS6.0 (on Windows 2003 Server) with already installed ASP.NET 1.1 applications, I’ve found out that if the old applications are running, the new one returns “Server Application Unavailable”, and vice versa.A quick search in the Event Viewer revealed that IIS isn’t fond of running applications of different ,NET runtime version, in the same process. Quite reasonable that is, yet annoying.</p>

<p>That’s when I remembered that I’ve always said to myself that I should look into the reason that IIS5.0 and IIS5.1 runs each ASP.NET application in a aspnet_wp.exe worker process, while IIS6.0 uses a single w3wp.exe worker process.</p>

<p>A little web search and I’ve found this: <a href="http://technet2.microsoft.com/WindowsServer/en/Library/d0a61f24-942e-4379-adad-8232be03441c1033.mspx">http://technet2.microsoft.com/WindowsServer/en/Library/d0a61f24-942e-4379-adad-8232be03441c1033.mspx</a>, and adjacent pages.</p>

<p>So this is a new feature of ASP.NET, that makes it possible to run a few applications in the same process. Every few applications (virtual directories) are assigned to an application pool, and each application pool runs in its own process.There are a few settings that can be done for each application pool. Those settings are overriding the defaults in the machine.config file.</p>

<p>Adding an application pool is done through inetmgr.msc, by just adding a new pool to the Application Pools section. Use the option to copy settings from the default application pool, so you’d have a decent place to start from:<img src="http://kenegozi.com/blog/uploaded/ApplicationPools.PNG" alt="" /></p>

<p>Assigning a pool to an application is done through the main property page of the application’s virtual directory:<img src="http://kenegozi.com/blog/uploaded/SettingApplicationPools.PNG" alt="" /></p>

<p>The solution to our problem is now obvious:When configuring a new IIS6.0 server, we will start with an application pool for each ASP.NET version we’re using (1.0, 1.1, 2.0), and any virtual directory we setup in the server will be configured to be part of the corresponding application pool. Now the applications can coexist and run together.</p>

<p>Enough with server configuration stuff. Now go back to coding.</p>

<p>Ken.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2006/01/31/vs-2005-adding-web-projects-pdb-files-to-vss-why-is-that-and-how-to-fix-it"></a></h2>
    <div class="meta">
        <time>on January 31, 2006</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/asp-net-2-0" rel="tag">asp-net-2-0</a>
            ,&nbsp;
            
            <a href="/blog/tag/visual-studio" rel="tag">visual-studio</a>
            ,&nbsp;
            
            <a href="/blog/tag/scm" rel="tag">scm</a>
            
            
        </span>
        
    </div>
    
     <p>Well, Here’s my first hopfully useful post in my blog.</p>

<p>The problem:</p>

<p>pdb files of projects and assemblies being referenced by a web application, somtimes become “source controlled” when using VS 2005 and VSS. This is leading to the pdbs and even dlls to become readonly, and therefore the break of a succesful post-build events, such as copying newly compiled dlls to the web application’s Bin directory, hence unexpected behavior of the application.</p>

<p>The “Why the heck this is happening”:</p>

<p>Using VS 2005 to develop ASP.NET 2.0 applications is somewhat different than in the good old VS 2003.</p>

<p>The main difference is caused by the missing project file.</p>

<p>As opposed to VS 2003, which compiled the cs (and vb) files of a web project using csc.exe (and vbc.exe), as with regular (not web) projects, things are different with VS 2005 web projects.</p>

<p>In order to allow on the fly compile of source files (codebehinds and App_Code files), and on the other hand, to allow a precompilation ofthe whole project (including aspx, ascxand other “non code” files), the framework has provided us with a special compiler, named aspnet_compiler.exe</p>

<p>allowing a full “automated” compiled outside of any IDE, requires disrelying on an IDE specific file, such as the csproj/vbproj files, therefore, everything in (and under) the application’s directory considered to be a part of the project.</p>

<p>In VS 2003 the compiler knew about referenced dlls and projects from the csproj/vbproj file. Now referenced dlls are known throuh a .refresh file in the Bin directory, that points to the location of the dll, and referenced project files are written to a special section in the web.config.</p>

<p>Controlling the source manually using VSS interface is possible, yet you have to manually remember not to check in items from the Bin directory, except the .refresh files.</p>

<p>The VSS integretion in VS 2005 is trying to outsmart the problem. it assumes that if a .refrsh file exists in the Bin directory, then the file it references is not to be source controlled. For example: if the Bin directory contains a file names MyAssembly.dll.refresh, then if it also contains a file names MyAssembly.dll (and it will, after a succesfull build), it won’t treat it as source controlled.</p>

<p>It also understands that if a file is there, due to a build action, it is also marked so it won’t besource controlled.</p>

<p>But, if you build you solution in Debug configuration,now you have pdb files in the Bin directory. let’s say that you do a Release Build, that does not create and copy pdb files. now the existing pdb files in the Bin directory are not marked, and the VSS integration will sense that there are new files in the Bin, that have no .refresh file, andwas not created during the last Build event, so it will mark them as Check InPending files !!!</p>

<p>The “Gosh it’s Ugly solution”:</p>

<p>You need to:1.Rebuild the solution in Debug configuration2. Close and Reopen the project.</p>

<p>If you’ve already accidently Checked In the pdb files, you need to:1. Manually delete them from the VSS.2. Manually set their readonly attribute to false.3.Rebuild the solution in Debug configuration4. Close and Reopen the project.</p>

<p>The place where i’ve found this solution: <a href="http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=106422&amp;SiteID=1">http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=106422&amp;SiteID=1</a></p>

<p>So until next time, keep on with the good coding thing you’ve beendoing while you’ve start reading this post.</p>

<p>Ken</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
</section>


	<!-- FOOTER -->
	<footer id="footer" class="section">
		<div class="container">
			<p class="copyright pull-left">
				&copy; 2014. Ken Egozi. All Rights Reserved.
				<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
					<img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
				</a>
				</p>
		</div>
	</footer>
	<!-- END FOOTER -->
	<div class="back-to-top">
		<a href="#top"><i class="fa fa-chevron-up"></i></a>
	</div>

	<script src="/assets/javascripts/jquery-2.1.0.min.js"></script>
	<script src="/assets/javascripts/jquery.localScroll.min.js"></script>
	<script src="/assets/javascripts/looper.min.js"></script>
	<script src="/assets/javascripts/bootstrap.min.js"></script>
	<script src="/assets/javascripts/site.js"></script>
</body>
</html>

<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en" class="no-js"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en" class="no-js"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en" class="no-js"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en" class="no-js"> <!--<![endif]-->

<head>
	<meta charset="utf-8">
	<title>Ken Egozi | Web builder</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="Ken Egozi's homepage">
	<meta name="author" content="Ken Egozi">
	<meta content="Ken Egozi's homepage" property='og:description'>
	<meta content='summary' name='twitter:card'>
	<meta content='@kenegozi' name='twitter:site'>
	<meta content='Ken Egozi | Web builder' property='og:title'>
	
	<link rel="canonical" href="http://kenegozi.com/blog/tag/testing/index.html" />

	<link rel="stylesheet" href="/assets/stylesheets/bootstrap.css" />
	<link rel="stylesheet" href="/assets/stylesheets/main.css" />

	<!-- Google Fonts -->
	<link href='http://fonts.googleapis.com/css?family=Dosis:300,400,500,600,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,300,400,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans+Condensed:700' rel='stylesheet' type='text/css'>
	<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type='text/css'>

	<!-- IE 9 Fallback-->
	<!--[if IE 9]>
		<link href="/assets/css/ie.css" rel="stylesheet">
	<![endif]-->

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements and IE Fallback-->
	<!--[if lt IE 9]>
	  <script src="/assets/js/html5shiv.js"></script>
	<![endif]-->

	<!-- Fav and touch icons -->
	<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/img/apple-touch-icon-144-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/img/apple-touch-icon-114-precomposed.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/img/apple-touch-icon-72-precomposed.png">
	<link rel="apple-touch-icon-precomposed" href="/assets/img/apple-touch-icon-57-precomposed.png">
	<link rel="shortcut icon" href="/assets/img/favicon.ico">
</head>
<body id="top" class="">
	
	<!-- NAVBAR -->
	<div class="navbar navbar-fixed-top navbar-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav">
					<span class="sr-only">Menu</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<nav class="navbar-collapse collapse" id="main-nav" role="navigation">
				<ul class="nav navbar-nav navbar-right">
					
					<li><a href="/">home</a></li>
					<li><a href="/#about">about</a></li>
					<li><a href="/#blog">blog</a></li>
					<li><a href="/#contact">contact</a></li>
				</ul>
			</nav>
		</div>
	</div>
	<!-- END NAVBAR -->
<section class="container content tags">
  <h1 class="post_title">Posts Tagged &ldquo;testing&rdquo;</h1>
  <div class="post-sidebar">
	<h5>Follow</h5>
	<p>
		<a href="http://feeds2.feedburner.com/kenegozi">
			<img src="http://feeds.feedburner.com/~fc/kenegozi?bg=000033&amp;fg=00FF00&amp;anim=1" height="26" width="88" style="border:0" alt="">
		</a>
	</p>
	<hr/>
</div>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2010/09/18/teamcity-5-dot-1--plus--git--plus--fix-here--plus--fix-there">TeamCity 5.1 + git + fix here + fix there</a></h2>
    <div class="meta">
        <time>on September 18, 2010</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/tools" rel="tag">tools</a>
            ,&nbsp;
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            ,&nbsp;
            
            <a href="/blog/tag/scm" rel="tag">scm</a>
            
            
        </span>
        
    </div>
    
     <p>Finally.</p>

<p><img src="http://kenegozi.com/blog/uploaded/WindowsLiveWriter/TeamCity5.1Git_EC2C/d1d672b3-4786-4d4c-a491-5160e2a6cf41.png" alt="green" /></p>

<p> </p>

<p>I have a tiny project that need updating – the idcc.co.il website (*).</p>

<p> 
Source control
I setup a new git repository on my home machine (using smart-http from git-dot-aspx, a different story for a different post) and now I got to setup a build server.</p>

<p> 
Team city
Downloaded TeamCity 5.1.4 (the free, Professional version). Installation was mostly painless, except that the build-agent properties setter got stuck and I had to manually edit the build-agent conf file. No biggie – just RTFM: <a href="http://confluence.jetbrains.net/display/TCD5/Setting+up+and+Running+Additional+Build+Agents#SettingupandRunningAdditionalBuildAgents-InstallingviaZIPFile">http://confluence.jetbrains.net/display/TCD5/Setting+up+and+Running+Additional+Build+Agents#SettingupandRunningAdditionalBuildAgents-InstallingviaZIPFile</a>.</p>

<p> 
git integration
Git is supported out of the box. I did have a minor glitch – the git-dot-aspx thing is <em>very</em> immature, and it simply did not work. Luckily the repository is located on the same machine as the build server and build agent so I simply directed the VCS root to the location on the filesystem.</p>

<p> 
building
I had a few glitches with MSBuild complaining about missing project types (the webapplication targets file) – that’s the first three failures you see in the snapshot. I then copied the targets from somewhere else and I got the bulid running</p>

<p> 
Fixing the tests
only to find that I have a broken test. Since when I created the initial website, I never set a build server, thus some changes I later introduced caused a minor regression. Now that I have a proper build server it (hopefully) won’t happen again.</p>

<p> </p>

<p> </p>

<p> </p>

<p> </p>

<ul>
  <li>yes, <a href="http://blogs.microsoft.co.il/blogs/ohad/">Ohad</a> and myself are setting up a second idcc conference. It is still in stealth mode, but keep you tabs of this. An announcement is planned for early October.</li>
</ul>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2010/02/23/tdd-in-ikea">TDD in IKEA</a></h2>
    <div class="meta">
        <time>on February 23, 2010</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            
            
        </span>
        
    </div>
    
     <p><a href="http://altinoren.com/PermaLink,guid,a530ffb1-34d1-49f8-a093-888d6354e91a.aspx">http://altinoren.com/PermaLink,guid,a530ffb1-34d1-49f8-a093-888d6354e91a.aspx</a></p>

<p> </p>

<p>Usually I do not just link to another post, but this one is simply hilarious, and I’d really want a permalink I could easily find again in the future. A post on my own blog is a great way to achieve that…</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2010/01/27/can-you-spot-the-bug">Can you spot the bug?</a></h2>
    <div class="meta">
        <time>on January 27, 2010</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/tools" rel="tag">tools</a>
            ,&nbsp;
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            
            
        </span>
        
    </div>
    
     <p>Can you spot what will cause the following NUnit test not to run on TeamCity 4.5?</p>

<p><code>
[TestFixture(&amp;quot;Testing some cool things&amp;quot;)]
public class CoolThingsFixture
{
	[Test]
	public void When_Do_Expect()
	{
		Assert.That(2, Is.EqualTo(1+1));
	}
}
</code></p>

<p> </p>

<p>hint: TeamCity list it with the ignored tests, yelling “No suitable constructor was found”</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2010/01/17/autostubber-to-ease-stub-based-unit-tests">AutoStubber to ease stub based unit tests</a></h2>
    <div class="meta">
        <time>on January 17, 2010</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/c-sharp" rel="tag">c-sharp</a>
            ,&nbsp;
            
            <a href="/blog/tag/tools" rel="tag">tools</a>
            ,&nbsp;
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            
            
        </span>
        
    </div>
    
     <p>Tired of setting up stubs for your class under test?</p>

<p>Tired of compile errors when you add one more dependency to a class?</p>

<p>The AutoStubber to the rescue.</p>

<p>Given</p>

<p>```
interface IServiceA
{
	string GetThis(long param);
}
interface IServiceB
{
	Do DoThat(string s);
}</p>

<p>class MyService
{
	public MyService(IServiceA a, IServiceB b) { … }
	…
}</p>

<p>…
```</p>

<p>you can write;</p>

<p>```
var service = new AutoStubber.Create();
// Arrange
var theString = "whatever";
service.Stubs().Get.Stub(x=&gt;x.GetThis(0).IgnoreArguments().Return(theString);</p>

<p>// Act
service.Execute();</p>

<p>// Assert
service.Stubs().Get.AssertWasCalled(x=&gt;x.DoThat(theString);
```</p>

<p> </p>

<p>The code for AutoStubber:</p>

<ul>
  <li>Mind you – it’s not the prettiest, but it gets the job done</li>
</ul>

<p>```
public class AutoStubber<t> where T : class
{
	static readonly Type TypeofT;
	static readonly ConstructorInfo Constructor;
	static readonly Type[] ParameterTypes;
	static readonly Dictionary&lt;object, AutoStubber<t>&gt; Instances = new Dictionary&lt;object, AutoStubber<t>&gt;();
	static AutoStubber()
	{
		TypeofT = typeof(T);
		Constructor = TypeofT.GetConstructors().OrderByDescending(ci =&gt; ci.GetParameters().Length).First();
		ParameterTypes = Constructor.GetParameters().Select(pi =&gt; pi.ParameterType).ToArray();
	}</t></t></t></p>

<pre><code>public static AutoStubber&lt;T&gt; GetStubberFor(T obj)
{
	return Instances[obj];
}

bool _created;
public T Create()
{
	if (_created)
		throw new InvalidOperationException(&amp;quot;Create can only be called once per AutoStubber&amp;quot;);
	_created = true;
	return Instance;
}

readonly Dictionary&lt;Type, object&gt; _dependencies = new Dictionary&lt;Type, object&gt;();
private T Instance { get; set; }
public AutoStubber()
{
	var parameters = new List&lt;object&gt;(ParameterTypes.Length);
	foreach (var parameterType in ParameterTypes)
	{
		var parameter = MockRepository.GenerateStub(parameterType);
		parameters.Add(parameter);
		_dependencies[parameterType] = parameter;
	}
	Instance = (T)Constructor.Invoke(parameters.ToArray());
	Instances[Instance] = this;
}
public TDependency Get&lt;TDependency&gt;()
{
	return (TDependency)_dependencies[typeof(TDependency)];
} } public static class AutoStubberExtensions {
public static AutoStubber&lt;T&gt; Stubs&lt;T&gt;(this T obj)
	where T : class
{
	return AutoStubber&lt;T&gt;.GetStubberFor(obj);
} } ```
</code></pre>

<p> </p>

<p>I know there is the AutoMockingContainer, and various other stuff out there, but this thing just was very natural to me, it uses a very simple API (do not need to keep reference to the Container), and took me less than an hour to knock off.</p>

<p>An enhancement I consider would be to allow setting pre-created values to some of the parameters. But meanwhile I did not happen to need it.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2009/06/25/a-very-nice-unit-testing-101-presentation">A very nice Unit Testing 101 presentation</a></h2>
    <div class="meta">
        <time>on June 25, 2009</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            
            
        </span>
        
    </div>
    
     <p>At <a href="http://webservices20.blogspot.com/">Yaron Nave’s blog</a>, which is an excellent reading for all things WCF.</p>

<p> </p>

<p>grab it at: <a href="http://webservices20.blogspot.com/2009/06/unit-tests-presentation.html">http://webservices20.blogspot.com/2009/06/unit-tests-presentation.html</a></p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/07/27/unit-testing-in-prolog-take-2">Unit Testing in PROLOG - take 2</a></h2>
    <div class="meta">
        <time>on July 27, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/personal" rel="tag">personal</a>
            ,&nbsp;
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            
            
        </span>
        
    </div>
    
     <p>I’ve refined my <a href="http://kenegozi.com/Blog/2008/07/24/unit-testing-in-prolog.aspx">“unit testing framework”</a> a bit, to make it less awkward.</p>

<p>the code:</p>

<p>```
test(Fact/Test):- current_predicate_under_test(Predicate), retractall(test_def(Predicate/Fact/Test)), assert(test_def(Predicate/Fact/Test)). setup_tests(Predicate) :- retractall(test_def(Predicate/<em>/</em>)), assert(current_predicate_under_test(Predicate)). end_setup_tests:- retractall(current_predicate_under_test(<em>)). run_tests :- dynamic(tests_stats/2), bagof(P/Tests, bagof((Fact/Test), test_def(P/Fact/Test), Tests), TestsPerPredicate), run_tests(TestsPerPredicate, Passed/Failed), write_tests_summary(Passed/Failed). run_tests(TestsTestsPerPredicate, TotalPassed/TotalFailed) :- run_tests(TestsTestsPerPredicate, 0/0, TotalPassed/TotalFailed). run_tests([], Passed/Failed, Passed/Failed):-!. 
run_tests([P/Tests|Rest], Passed/Failed, TotalPassed/TotalFailed):- write(‘testing ‘), write(P),  foreach_test(Tests, PassedInPredicate/FailedInPredicate), write(‘ passed:’), write(PassedInPredicate), (FailedInPredicate &gt; 0, write(‘ failed:’), write(FailedInPredicate) ; true), nl, Passed1 is Passed + PassedInPredicate, Failed1 is Failed + FailedInPredicate, run_tests(Rest, Passed1/Failed1, TotalPassed/TotalFailed). foreach_test(Tests, Passed/Failed):- foreach_test(Tests, 0/0, Passed/Failed). foreach_test([], Passed/Failed, Passed/Failed):-!. foreach_test([Fact/Test|Rest], Passed/Failed, NewPassed/NewFailed):- assert((run_test:-Test)), ( run_test, !, NextPassed is Passed + 1, NextFailed is Failed ; NextFailed is Failed + 1, NextPassed is Passed, write(‘FAIL: ‘), write(Fact), nl ), retract((run_test:-Test)), foreach_test(Rest, NextPassed/NextFailed, NewPassed/NewFailed). write_tests_summary(Passed/0) :- !, nl, write(Passed), write(‘ tests passed :)’), nl. write_tests_summary(Passed/Failed) :- nl, write(Passed), write(‘ tests passed, however’), nl, write(Failed), write(‘ tests failed :(‘), nl. reset_all_tests:- retractall(test_def(</em>/<em>/</em>)).</p>

<p>```</p>

<p>the usage:</p>

<p><code>
:- setup_tests('conc/3'). 
:- test('empty and empty returns empty'/( conc([], [], []))). 
:- test('empty and nonempty returns L2'/( conc([], [1,2], [1,2]))). 
:- test('nonempty and empty returns L1'/( conc([1,2], [], [1,2]))). 
:- test('nonempty and nonempty returns L1 concatenated with L2'/( conc([1,2], [3,4], [1,2,3,4]))). 
:- end_setup_tests.
</code></p>

<p>my current test output:</p>

<p><code>
| ?- run_tests.
testing conc/3 passed:4testing create_list/3 passed:2testing empty_pit/5 passed:1testing get_opposite_pit/2 passed:2testing in_range/2 passed:2testing is_in_range/2 passed:4testing put_seeds/5 passed:3 
18 tests passed :)yes
</code></p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/07/24/unit-testing-in-prolog">Unit testing in PROLOG</a></h2>
    <div class="meta">
        <time>on July 24, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/personal" rel="tag">personal</a>
            ,&nbsp;
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            
            
        </span>
        
    </div>
    
     <p>Finally I’m sitting down to be done with my Computer Science degree. I’ve been studying in the Israeli Open University starting 2003, while working full time and more. Over than two years ago I reached the point of having literally no time at all to finish it up, so I left it to be with only two final projects to complete, present and defend. </p>

<p>The first one is to write a simple AI enabled game (using depth delimited alpha-beta algorithm variation) , in PROLOG.</p>

<p>Back when I took that course, the whole paradigm was too strange to me. I’ve been doing procedural and OO coding for years, and the look of the programs just looked …. wrong.</p>

<p>Nowadays that I developed a lot of curiosity into declarative languages like Erlang and F#, (and being a much better and way more experienced developer) I can relate to that type of coding more easily.</p>

<p>So, dusting the rust of two year of not touching it at all, I sat down today to start working on that project (delivery is next month), I started with writing down a small helper for running unit tests on my code.</p>

<p>Ain’t pretty, but it serves both the need to test my code, and the need to re-learn the language:</p>

<p>```</p>

<table>
  <tbody>
    <tr>
      <td>run_tests :- dynamic([ tests_passed/1, failing_tests/1, total_tests_passed/1, total_failing_tests/1 ]), assert(tests_passed(0)), assert(failing_tests([])), assert(total_tests_passed(0)), assert(total_failing_tests([])), bagof( (Module/Predicate, Tests),  tests(Module/Predicate, Tests),  TestDefinitions), run_tests_definitions(TestDefinitions), retract(total_tests_passed(TotalPassedAtEnd)),  retract(total_failing_tests(TotalFailedAtEnd)), len(TotalFailedAtEnd, TotalFailedAtEndCount), write(‘summary:’), nl, write(‘Passed: ‘), write(TotalPassedAtEnd),  write(‘ Failed: ‘), write(TotalFailedAtEndCount), nl, nl, (TotalFailedAtEndCount&gt; 0, write_fails(TotalFailedAtEnd) ; write(‘Alles Gut’), nl). run_tests_definitions([]) :- !.run_tests_definitions([(Module/Predicate, Tests)</td>
      <td>T]) :- write(‘module: ‘), write(Module),  write(‘ predicate: ‘), write(Predicate), write(‘ … ‘), run_tests(Tests), retract(tests_passed(Passed)),  retract(failing_tests(Failed)), assert(tests_passed(0)), assert(failing_tests([])), len(Failed, FailedCount), write(‘Passed: ‘), write(Passed),  write(‘ Failed: ‘), write(FailedCount), nl,  retract(total_tests_passed(TotalPassed)),  retract(total_failing_tests(TotalFailed)), NewTotalPassed is TotalPassed + Passed, conc(Failed, TotalFailed, NewTotalFailed), assert(total_tests_passed(NewTotalPassed)),  assert(total_failing_tests(NewTotalFailed)), run_tests_definitions(T).</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>write_fails([]) :- !.write_fails([H</td>
      <td>T]) :-  write_fails(T), write(H), write(‘ failed’), nl. run_tests([]) :- !.run_tests([H</td>
      <td>T]) :- run_test(H), run_tests(T).</td>
    </tr>
  </tbody>
</table>

<table>
  <tbody>
    <tr>
      <td>run_test(Test) :- call(Test),!, tests_passed(X), retract(tests_passed(X)),  NewX is X + 1, assert(tests_passed(NewX)).run_test(Test) :- failing_tests(X), retract(failing_tests(X)), NewX = [Test</td>
      <td>X], assert(failing_tests(NewX)). % Assertsassert_all_members_equal_to([], _).assert_all_members_equal_to([H</td>
      <td>T], H) :- assert_all_members_equal_to(T, H).</td>
    </tr>
  </tbody>
</table>

<p>```</p>

<p>this code is allowing me to define my tests like the following:</p>

<p>```</p>

<p>tests(moves/change_list, [ change_list__add_first__works, change_list__add_middle__works, change_list__add_last__works, change_list__empty_first__works, change_list__add_middle__works, change_list__add_last__works]). 
change_list__add_first__works :- L = [1,1,1],change_list(L, L1, 1, add), L1 = [2,1,1]. change_list__add_middle__works :- L = [1,1,1],change_list(L, L1, 2, add), L1 = [1,2,1].</p>

<p>…</p>

<p>```</p>

<p>invoking the tests is as simple as the predicate:</p>

<p><code>
:- run_tests.
</code></p>

<p>and the current output from my project is:</p>

<p><code>
module: utils predicate: in_range ... Passed: 4 Failed: 0module: utils predicate: create_list ... Passed: 2 Failed: 0module: moves predicate: change_list ... Passed: 6 Failed: 0module: moves predicate: move ... Passed: 1 Failed: 0module: moves predicate: step ... Passed: 1 Failed: 1summary:Passed: 14 Failed: 1 
step__when_ends_within_same_player_pits__works failedyes
</code></p>

<p>Ahm. A failing test …. back to work I guess. </p>

<p>btw, The game I am implementing is <a href="http://www.wikimanqala.org/wiki/Kalah">Kalah</a>. </p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2008/02/05/how-would-you-test-that">How would you test that?</a></h2>
    <div class="meta">
        <time>on February 5, 2008</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/architecture" rel="tag">architecture</a>
            ,&nbsp;
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            ,&nbsp;
            
            <a href="/blog/tag/altnetuk" rel="tag">altnetuk</a>
            
            
        </span>
        
    </div>
    
     <p>Given the following code:</p>

<p><code>
public void UpdatePerson(int id, string name){ Person p = peopleRepository.Get(id); p.name = name; peopleRepository.Update(p);}
</code></p>

<p>One answer would be (using a pseudo mocking framework):</p>

<p><code>
Person p = new Person();
Expect.Call(peopleRepository.Get(0)) .Returns(p);
Expect.Call(peopleRepository.Update(p)); 
... 
service.UpdatePerson(0, "MyName");
</code></p>

<p>Other approach would be (using pseudo coding again):</p>

<p><code>
Person p = CreateAndInsertToDB();service.UpdatePerson(p.id, "New Name");FlushAndRecreateTheSession();Person updated = GetFromDB(p.Id);Assert.Equal("New Name", updated.Name);
</code></p>

<p>What would you do, and why?</p>

<p>(I’m tagging that also under altnetuk as it has been inspired by a session around test-granularity, mocking frameworks, etc.)</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
    

    <section class="container content post">
    <h2><a href="/blog/2007/12/20/unit-testing-101-article">Unit Testing 101 Article</a></h2>
    <div class="meta">
        <time>on December 20, 2007</time>&nbsp;&nbsp;
        <span class="tags">
            
            <a href="/blog/tag/testing" rel="tag">testing</a>
            
            
        </span>
        
    </div>
    
     <p>Usually I won’t just link to another’s post, but <a href="http://codebetter.com/blogs/karlseguin/archive/2007/12/20/foundations-of-programming-part-5-unit-testing.aspx">this one is a very good introductory level Unit Testing 101 Article</a>, covering basics of the idea, and basic of nUnit and Rhino.Mocks.</p>

<p>A must read for Unit Testing newbies.</p>


    </section>


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
</section>


	<!-- FOOTER -->
	<footer id="footer" class="section">
		<div class="container">
			<p class="copyright pull-left">
				&copy; 2014. Ken Egozi. All Rights Reserved.
				<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
					<img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/88x31.png" />
				</a>
				</p>
		</div>
	</footer>
	<!-- END FOOTER -->
	<div class="back-to-top">
		<a href="#top"><i class="fa fa-chevron-up"></i></a>
	</div>

	<script src="/assets/javascripts/jquery-2.1.0.min.js"></script>
	<script src="/assets/javascripts/jquery.localScroll.min.js"></script>
	<script src="/assets/javascripts/looper.min.js"></script>
	<script src="/assets/javascripts/bootstrap.min.js"></script>
	<script src="/assets/javascripts/site.js"></script>
</body>
</html>
